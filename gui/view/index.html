<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title> DataDog Agent 6 </title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"> </script>
</head>
<body>
  <h1> Test </h1>

<button onclick="a()">A</button>
<button onclick="b()">B</button>

</body>

<script>

$(document).ready(function() {

  // Load the RSA key generated by main.go
  /*
  var rawFile = new XMLHttpRequest();
  rawFile.open("GET", "??? keys/app.rsa.pub", false);
  rawFile.onreadystatechange = function () {
     if(rawFile.readyState === 4 && (rawFile.status === 200 || rawFile.status == 0)) {
         publickey = rawFile.responseText;
         alert(publickey);
     }
  }
  rawFile.send(null);
  */

  // Request authentication from the server (if successful, sets a cookie with a valid JSON web token)
  $.post("http://localhost:8080/auth",
    JSON.stringify({
      key: "-----BEGIN PUBLIC KEY-----\n" +
      "MIIBGzANBgkqhkiG9w0BAQEFAAOCAQgAMIIBAwKB+wDZOj0TDBl/9UOTCnASWg9O\n" +
      "bm/Wvfrak/5W6J3GGQFzRsTxGNtjzOlMhO1kRmoMN5JqIk1EhcV+Fz3g6NCT11iG\n" +
      "rdeeEBtd9XUwpP95HDaj4N6Uyyi72H+4oMDwLEepRj8+qjJYdgWd/LzeTZ4G3z5Q\n" +
      "wywAFeD34UWRlGj3bgKg2ZHm2LJRiotjfpBO76w7Uidn25d0WvSsQjMxBL0e+1n/\n" +
      "MgYaBBWkz89qstA2BDTs0xkR995yo2XK+iDKKMuhEXD6NfeUyC46ItMf00B92S86\n" +
      "UwRjf3EQfJEQmkiIlT9vTdNL1fDU8ALFsImeDru4jCt7RiA0vFzPBG37AgMBAAE=\n" +
      "-----END PUBLIC KEY-----"
    }), function(res) {
      console.log("hey")
    });
});


function a() {
  $.post("http://localhost:8080/req",
    JSON.stringify({
      req_type: "command",
      data: "a"
    })
  , function(res) {
    console.log(res)
  });
}

function b() {
  $.post("http://localhost:8080/req",
    JSON.stringify({
      req_type: "command",
      data: "b"
    })
  , function(res) {
    console.log(res)
  });
}
</script>
